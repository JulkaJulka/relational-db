CREATE TABLE MOVIE_STAT(
MOVIE_ID NUMBER UNIQUE,
RATING DECIMAL(10,1) CHECK (RATING BETWEEN 1 AND 10),
DOMESTIC_SALES NUMBER,
INTERNATIONAL_SALES NUMBER
);
CREATE TABLE MOVIE(
ID NUMBER UNIQUE,
TITLE VARCHAR2(50) UNIQUE NOT NULL,
DIRECTOR VARCHAR2(50)UNIQUE NOT NULL,
YEAR NUMBER(4),
CONSTRAINT YEAR_MOVIE CHECK( YEAR BETWEEN 1900 AND 2018),
LENGTH_MINS NUMBER(3) CHECK(LENGTH_MINS BETWEEN 10 AND 200)
);

SELECT DIRECTOR, COUNT(*) FROM MOVIE GROUP BY DIRECTOR;
SELECT COUNT(DOMESTIC_SALES), COUNT(INTERNATIONAL_SALES) FROM MOVIE_STAT, MOVIE WHERE MOVIE.ID = MOVIE_STAT.MOVIE_ID GROUP BY DIRECTOR;
SELECT * FROM MOVIE ORDER BY YEAR DESC;

CREATE TABLE AUTHOR(
ID NUMBER,
CONSTRAINT AUTHOR_PC PRIMARY KEY (ID),
--CONSTRAINT CONSTR-NAME CONSTRAINT TYPE(COLUMN_NAME)
NAME NVARCHAR2(50) NOT NULL,
LAST_NAME NVARCHAR2(50) UNIQUE,
COUNTRY NVARCHAR2(50) DEFAULT 'ENGLAND',
AGE NUMBER DEFAULT 0,
ARTICLES_COUNT NUMBER CHECK(ARTICLES_COUNT > 10),
CONSTRAINT CHECK_COUNTRY CHECK (COUNTRY != 'CHINA' AND LAST_NAME != 'TEST_LN')
);

CREATE TABLE "ORDER"(
ID NUMBER CHECK(ID <= 10000),
 CONSTRAINT ID_ORDER_PK PRIMARY KEY (ID),
 USER_ID NUMBER UNIQUE,
 ROOM_ID NUMBER UNIQUE,
 DATE_FROM DATE,
DATE_TO DATE,
MONEY_PAID DECIMAL(10,2)
);

CREATE TABLE HOTEL(
ID NUMBER,
CONSTRAINT ID_HOTEL_PK PRIMARY KEY (ID),
COUNTRY NVARCHAR2(50) DEFAULT 'N/A',
CONSTRAINT CHECK_COUNTRY_HOTEL CHECK(COUNTRY NOT IN('China','Belgium','Ukraine', 'Romania')),
CITY NVARCHAR2(50) NOT NULL,
STREET NVARCHAR2(50)
);